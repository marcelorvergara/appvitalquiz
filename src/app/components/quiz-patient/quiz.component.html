<div class="sm:w-4/12 mx-auto" *ngIf="!finalScore">
  <!-- Banner -->
  @if(patientName) {
    <h1 class="text-2xl font-bold text-gray-800 p-2 bg-stone-200">{{ patientName }}</h1>
  } @else {
    <h1 class="text-xl font-bold text-gray-800 p-2 bg-red-400">Avaliação avulsa.</h1>
    <h1 class="font-bold text-gray-800 p-2 bg-stone-200"> Sem efeitos para registro de evolução do tratamento.</h1>
  }

  <!-- Questions -->
  <div class="pt-4" [@fadeInOut]="isOpen ? 'open': 'closed' ">
    <p>Pergunta {{ questionNum() + 1 }} de {{ questions.length }}</p>
    <app-quiz-questions [question]="questions[questionNum()]"></app-quiz-questions>
  </div>

  <!-- Input range -->
  <form #quizForm="ngForm" (ngSubmit)="onSubmit()">
    <div class="grid grid-cols-2 m-4 gap-2">
      @for(item of answerOption; track item; let idx = $index) {
        <div class="text-left flex items-end ml-4"><span class="font-bold" (click)="selectOption(item.id)">{{idx + 1}})&nbsp;</span>{{ item.text }}</div>
        <div class="text-right">
          <label for={{item.id}} class="mr-3 text-3xl" (click)="selectOption(item.id)">{{ item.emoji }}</label>
          <input type="radio" name={{item.id}} [value]="item.id" [checked]="answer === item.id" [(ngModel)]="answer" class="form-radio h-5 w-5 text-blue-600">
        </div>
      }
    </div>

    <!-- Navigation buttons -->
    <div class="p-4 flex justify-between mt-4">
      <div>
        <button type="button" class="btn-custom-actv" (click)="decrement()" *ngIf="questionNum() > 0 && questionNum() < 12">Voltar</button>
      </div>
      <div>
        <button type="button" class="btn-custom-actv" (click)="increment()" *ngIf="questionNum() < 11">Próxima</button>
        <button type="submit" class="btn-custom-actv" *ngIf="questionNum() === 11">Finalizar</button>
      </div>
    </div>
  </form>
</div>

<div *ngIf="finalScore">
  <div class="p-4 m-4" [ngStyle]="{'background-color' : bgResultColor}">
    <span class="text-xl">{{ finalScore }}</span>
  </div>
  <div class="p-4 flex justify-end mt-16">
    <div>
      <button type="button" class="btn-custom-actv" routerLink="">Início</button>
    </div>
  </div>
</div>
